## æ€ç»´å¯¼èˆª

* [EF Coreä»‹ç»](https://github.com)
* [Entity Framework Plus](https://github.com)
* [é¡¹ç›®åŠŸèƒ½ç‰¹æ€§](https://github.com)
* [é¡¹ç›®NuGetåŒ…å®‰è£…](https://github.com)
* [æ‰¹é‡åˆ é™¤](https://github.com)
* [æ‰¹é‡æ›´æ–°](https://github.com)
* [æŸ¥è¯¢è¿‡æ»¤å™¨](https://github.com)
* [é¡¹ç›®æºç åœ°å€](https://github.com)
* [ä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰](https://github.com)

## EF Coreä»‹ç»


Entity Framework (EF) Core æ˜¯è½»é‡åŒ–ã€å¯æ‰©å±•ã€å¼€æºå’Œè·¨å¹³å°ç‰ˆçš„å¸¸ç”¨ Entity Framework æ•°æ®è®¿é—®æŠ€æœ¯ï¼ŒEF Core æ˜¯é€‚ç”¨äº .NET çš„ç°ä»£å¯¹è±¡æ•°æ®åº“æ˜ å°„å™¨ã€‚å®ƒæ”¯æŒ LINQ æŸ¥è¯¢ã€æ›´æ”¹è·Ÿè¸ªã€æ›´æ–°å’Œæ¶æ„è¿ç§»ã€‚EF Core é€šè¿‡æä¾›ç¨‹åºæ’ä»¶ API ä¸ SQL Serverã€Azure SQL æ•°æ®åº“ã€SQLiteã€Azure Cosmos DBã€MySQLã€PostgreSQL å’Œå…¶ä»–æ•°æ®åº“ä¸€èµ·ä½¿ç”¨ï¼ˆå¾®è½¯å®˜æ–¹å‡ºå“ï¼‰ã€‚


:[MeoMiao èŒå–µåŠ é€Ÿ](https://biqumo.org)## Entity Framework Plus


Entity Framework Plusæ˜¯ä¸€ä¸ªå¼€æºã€å…è´¹ï¼ˆMIT Licenseï¼‰ã€åŠŸèƒ½å¼ºå¤§çš„ Entity Frameworkï¼ˆEFï¼‰å’Œ Entity Framework Coreï¼ˆEF Coreï¼‰ æ‰©å±•åº“ï¼Œæ—¨åœ¨æå‡ Entity Framework çš„æ€§èƒ½å’Œå…‹æœå…¶å±€é™æ€§ã€‚é€šè¿‡æä¾›ä¸€ç³»åˆ—å®ç”¨çš„åŠŸèƒ½ï¼Œå¦‚æ‰¹é‡æ“ä½œã€æŸ¥è¯¢ç¼“å­˜ã€æŸ¥è¯¢å»¶è¿Ÿã€LINQåŠ¨æ€ã€å®¡è®¡è·Ÿè¸ªç­‰ï¼Œä½¿å¾—ä½¿ç”¨ Entity Framework è¿›è¡Œæ•°æ®åº“å¼€å‘å˜å¾—æ›´åŠ é«˜æ•ˆå’Œçµæ´»ã€‚


## é¡¹ç›®åŠŸèƒ½ç‰¹æ€§


ä»¥ä¸‹æ˜¯ `Entity Framework Plus` é¡¹ç›®çš„ä¸€äº›ä¸»è¦ç‰¹ç‚¹å’ŒåŠŸèƒ½ï¼š


* **æ‰¹é‡æ“ä½œ**ï¼šæ”¯æŒæ‰¹é‡æ’å…¥ã€æ›´æ–°ã€åˆ é™¤å’Œåˆå¹¶æ“ä½œï¼Œè¿™äº›æ“ä½œå¯ä»¥åœ¨å•ä¸ªæ•°æ®åº“å¾€è¿”ä¸­å¤„ç†å¤šæ¡è®°å½•ï¼Œè€Œæ— éœ€åŠ è½½å®ä½“åˆ°å†…å­˜ä¸­ï¼Œä»è€Œæ˜¾è‘—æé«˜æ€§èƒ½ã€‚
* **æŸ¥è¯¢ç¼“å­˜**ï¼šæä¾›æŸ¥è¯¢ç¼“å­˜åŠŸèƒ½ï¼Œå…è®¸å°†æŸ¥è¯¢ç»“æœç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œä»¥å‡å°‘å¯¹æ•°æ®åº“çš„é‡å¤æŸ¥è¯¢ï¼Œæé«˜åº”ç”¨ç¨‹åºçš„å“åº”é€Ÿåº¦ã€‚
* **æŸ¥è¯¢å»¶è¿Ÿ**ï¼šå…è®¸å»¶è¿ŸæŸ¥è¯¢çš„æ‰§è¡Œï¼Œä»¥ä¾¿åœ¨éœ€è¦æ—¶ç»“åˆå…¶ä»–åŠŸèƒ½ï¼ˆå¦‚æŸ¥è¯¢ç¼“å­˜å’ŒæŸ¥è¯¢æœªæ¥ï¼‰ä¸€èµ·æ‰§è¡Œã€‚
* **æŸ¥è¯¢è¿‡æ»¤**ï¼šæ”¯æŒåœ¨å…¨å±€ã€å®ä¾‹æˆ–æŸ¥è¯¢çº§åˆ«ä¸Šåº”ç”¨è¿‡æ»¤æ¡ä»¶ï¼Œä»¥ä¾¿åœ¨æ£€ç´¢æ•°æ®æ—¶è‡ªåŠ¨åº”ç”¨è¿™äº›æ¡ä»¶ã€‚
* **æŸ¥è¯¢æœªæ¥**ï¼šå…è®¸å°†å¤šä¸ªæŸ¥è¯¢åˆå¹¶åˆ°å•ä¸ªæ•°æ®åº“å¾€è¿”ä¸­ï¼Œä»è€Œå‡å°‘æ•°æ®åº“å¾€è¿”æ¬¡æ•°ï¼Œæé«˜æ€§èƒ½ã€‚
* **æŸ¥è¯¢åŒ…å«ä¼˜åŒ–**ï¼šæ”¹è¿›äº† Include æ–¹æ³•çš„è¡Œä¸ºï¼Œå…è®¸åœ¨åŠ è½½å…³è”å®ä½“æ—¶åº”ç”¨è¿‡æ»¤æ¡ä»¶ï¼Œä»è€Œä¼˜åŒ–ç”Ÿæˆçš„ SQL è¯­å¥ã€‚
* **å®¡è®¡è·Ÿè¸ª**ï¼šæä¾›å®¡è®¡è·Ÿè¸ªåŠŸèƒ½ï¼Œå…è®¸è‡ªåŠ¨è·Ÿè¸ªå¯¹å®ä½“çš„æ›´æ”¹ï¼Œå¹¶å°†å®¡è®¡ä¿¡æ¯ä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚
* **æ”¯æŒå¤šä¸ªç‰ˆæœ¬çš„ Entity Framework**ï¼š`EntityFramework-Plus` æ”¯æŒ Entity Framework 5ï¼ˆEF5ï¼‰ã€Entity Framework 6ï¼ˆEF6ï¼‰å’Œ Entity Framework Coreï¼ˆEF Coreï¼‰ã€‚
* **æ˜“äºé›†æˆ**ï¼šé€šè¿‡ NuGet åŒ…ç®¡ç†å™¨å¯ä»¥è½»æ¾åœ°å°† `EntityFramework-Plus` é›†æˆåˆ°ç°æœ‰çš„ Entity Framework æˆ– Entity Framework Core é¡¹ç›®ä¸­ã€‚


![](https://img2024.cnblogs.com/blog/1336199/202409/1336199-20240913083010792-242722612.png)


## é¡¹ç›®NuGetåŒ…å®‰è£…


NuGetåŒ…ç®¡ç†å™¨ä¸­æœç´¢ï¼š`Z.EntityFramework.Plus.EFCore`åŒ…è¿›è¡Œå®‰è£…ã€‚


![](https://img2024.cnblogs.com/blog/1336199/202409/1336199-20240913083024481-1719178998.png)


## æ‰¹é‡åˆ é™¤


å¦‚æœéœ€è¦åˆ é™¤æˆç™¾ä¸Šåƒä¸ªå®ä½“ï¼Œä½¿ç”¨Entity Framework Coreè¿›è¡Œåˆ é™¤å¯èƒ½ä¼šéå¸¸æ…¢ã€‚å®ä½“åœ¨è¢«åˆ é™¤ä¹‹å‰é¦–å…ˆåŠ è½½åˆ°ä¸Šä¸‹æ–‡ä¸­ï¼Œè¿™å¯¹æ€§èƒ½éå¸¸ä¸åˆ©ï¼Œç„¶åï¼Œå®ƒä»¬è¢«ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°åˆ é™¤ï¼Œè¿™ä½¿å¾—åˆ é™¤æ“ä½œå˜å¾—æ›´ç³Ÿã€‚



```
varÂ ctxÂ =Â newÂ EntitiesContext();

//Â åˆ é™¤æ‰€æœ‰2å¹´ä¸æ´»åŠ¨çš„ç”¨æˆ·
varÂ dateÂ =Â DateTime.Now.AddYears(-2);
ctx.Users.Where(xÂ =>Â x.LastLoginDateÂ <Â date)
Â Â Â Â Â Â Â Â Â .Delete();

//Â ä½¿ç”¨BatchSizeåˆ é™¤
varÂ dateÂ =Â DateTime.Now.AddYears(-2);
ctx.Users.Where(xÂ =>Â x.LastLoginDateÂ <Â date)
Â Â Â Â Â Â Â Â Â .Delete(xÂ =>Â x.BatchSizeÂ =Â 1000);

```

## æ‰¹é‡æ›´æ–°


å¦‚æœéœ€è¦æ›´æ–°å…·æœ‰ç›¸åŒè¡¨è¾¾å¼çš„æ•°ç™¾æˆ–æ•°åƒä¸ªå®ä½“ï¼Œåˆ™ä½¿ç”¨Entity Framework Coreè¿›è¡Œæ›´æ–°å¯èƒ½ä¼šéå¸¸æ…¢ã€‚å®ä½“åœ¨æ›´æ–°ä¹‹å‰é¦–å…ˆåŠ è½½åˆ°ä¸Šä¸‹æ–‡ä¸­ï¼Œè¿™å¯¹æ€§èƒ½éå¸¸ä¸åˆ©ï¼Œç„¶åï¼Œå®ƒä»¬ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ›´æ–°ï¼Œè¿™ä½¿å¾—æ›´æ–°æ“ä½œå˜å¾—æ›´ç³Ÿã€‚



```
varÂ ctxÂ =Â newÂ EntitiesContext();

//Â æ›´æ–°æ‰€æœ‰ç”¨æˆ·2å¹´ä¸æ´»åŠ¨
varÂ dateÂ =Â DateTime.Now.AddYears(-2);
ctx.Users.Where(xÂ =>Â x.LastLoginDateÂ <Â date)
Â Â Â Â Â Â Â Â Â .Update(xÂ =>Â newÂ User()Â {Â IsSoftDeletedÂ =Â 1Â });

```

## æŸ¥è¯¢è¿‡æ»¤å™¨


### å…¨å±€è¿‡æ»¤å™¨



```
//Â CREATEÂ globalÂ filter
QueryFilterManager.Filter<Customer>(xÂ =>Â x.Where(cÂ =>Â c.IsActive));

varÂ ctxÂ =Â newÂ EntityContext();

//Â TIP:Â AddÂ thisÂ lineÂ inÂ EntitiesContextÂ constructorÂ instead
QueryFilterManager.InitilizeGlobalFilter(ctx);

//Â SELECTÂ *Â FROMÂ CustomerÂ WHEREÂ IsActiveÂ =Â true
varÂ customerÂ =Â ctx.Customers.ToList();

```

### å®ä¾‹è¿‡æ»¤



```
varÂ ctxÂ =Â newÂ EntityContext();

//Â CREATEÂ filter
ctx.Filter<Customer>(xÂ =>Â x.Where(cÂ =>Â c.IsActive));

//Â SELECTÂ *Â FROMÂ CustomerÂ WHEREÂ IsActiveÂ =Â true
varÂ customerÂ =Â ctx.Customers.ToList();

```

### æŸ¥è¯¢è¿‡æ»¤å™¨



```
varÂ ctxÂ =Â newÂ EntityContext();

//Â CREATEÂ filterÂ disabled
ctx.Filter<Customer>(CustomEnum.EnumValue,Â xÂ =>Â x.Where(cÂ =>Â c.IsActive),Â false);

//Â SELECTÂ *Â FROMÂ CustomerÂ WHEREÂ IsActiveÂ =Â true
varÂ customerÂ =Â ctx.Customers.Filter(CustomEnum.EnumValue).ToList();

```

## é¡¹ç›®æºç åœ°å€


æ›´å¤šé¡¹ç›®å®ç”¨åŠŸèƒ½å’Œç‰¹æ€§æ¬¢è¿å‰å¾€é¡¹ç›®å¼€æºåœ°å€æŸ¥çœ‹ğŸ‘€ï¼Œåˆ«å¿˜äº†ç»™é¡¹ç›®ä¸€ä¸ªStaræ”¯æŒğŸ’–ã€‚


* å¼€æºåœ°å€ï¼š[https://github.com/zzzprojects/EntityFramework\-Plus](https://github.com)
* åœ¨çº¿æ–‡æ¡£ï¼š[https://entityframework\-plus.net](https://github.com)


## ä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰


è¯¥é¡¹ç›®å·²æ”¶å½•åˆ°C\#/.NET/.NET Coreä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰ä¸­ï¼Œå…³æ³¨ä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰èƒ½è®©ä½ åŠæ—¶äº†è§£C\#ã€.NETå’Œ.NET Coreé¢†åŸŸçš„æœ€æ–°åŠ¨æ€å’Œæœ€ä½³å®è·µï¼Œæé«˜å¼€å‘å·¥ä½œæ•ˆç‡å’Œè´¨é‡ã€‚å‘å·²æŒ–ï¼Œæ¬¢è¿å¤§å®¶è¸Šè·ƒæäº¤PRæ¨èæˆ–è‡ªèï¼ˆè®©ä¼˜ç§€çš„é¡¹ç›®å’Œæ¡†æ¶ä¸è¢«åŸ‹æ²¡ğŸ¤ï¼‰ã€‚


* GitHubå¼€æºåœ°å€ï¼š[https://github.com/YSGStudyHards/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md](https://github.com)
* Giteeå¼€æºåœ°å€ï¼š[https://gitee.com/ysgdaydayup/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md](https://github.com)


